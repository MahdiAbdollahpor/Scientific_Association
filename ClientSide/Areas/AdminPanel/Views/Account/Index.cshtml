@using ServiceLayer.Services.Interfaces
@using ServiceLayer.ViewModels.AdminViewModels
@using ServiceLayer.ViewModels.BaseViewModels
@model BaseFilterViewModel<ListUserViewModel>
@inject IAdminService _adminService
@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/AdminPanel/Views/Shared/_Layout.cshtml";
}

<!-- Content area -->

<div class="flex-1 overflow-auto p-6">
    <div class="content-area" id="users-content">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-800">مدیریت کاربران</h2>

            <!-- Search Box -->
            <div class="relative">
                <form method="get" asp-action="UsersList" id="formFilter">
                    <input hidden value="@Model.PageIndex" id="pageId" name="pageId" />
                    <input type="text" id="user-search" placeholder="جستجوی کاربر..."
                           class="pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <i class="fas fa-search text-gray-400"></i>
                    </div>
                </form>
               
            </div>

            <button id="new-user-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none">
                <i class="fas fa-plus ml-2"></i>
                کاربر جدید
            </button>
        </div>
        <div class="bg-white shadow rounded-lg overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ردیف</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">نام</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">نام خانوادگی</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">شماره تماس</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">کد ملی</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">کد دانشجویی</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">تاریخ عضویت</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">وضعیت</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عملیات</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="users-table-body">

                        @{
                            int counter = 1;
                        }

                        @foreach (var item in Model.Entities)
                        {
                            <tr>
                                <th scope="row">@counter</th>
                                <td>@item.firstName</td>
                                <td>@item.lastName</td>
                                <td>@item.PhoneNumber</td>
                                <td>@item.nationalCode</td>
                                <td>@item.studentNumber</td>
                                <td>@item.CreateDate</td>
                                <td>@(item.IsDeleted == true ? "غیر فعال" : " فعال")</td>
                                
                                <td>
                                    <button class="text-yellow-600 hover:text-yellow-900 ml-2 edit-user-btn" data-user-id="${user.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-600 hover:text-red-900 ml-2 delete-btn" data-id="${user.id}" data-type="user">
                                        <i class="fas fa-trash"></i>
                                    </button>

                                </td>
                            </tr>
                            counter++;
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-footer">
        @if (Model.PageCount > 1)
        {
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    @if (Model.PageIndex > Model.StartPage)
                    {
                        <li class="page-item">
                            <a class="page-link" href="javascript:;" aria-label="Previous">
                                <span aria-hidden="true">«</span>
                            </a>
                        </li>
                    }
                    @for (int i = Model.StartPage; i <= Model.EndPage; i++)
                    {
                        <li class="page-item">
                            <a class="page-link paginations @(Model.PageIndex == i ? "active" : "")" href="javascript:;">@i</a>
                        </li>
                    }

                    @if (Model.PageIndex < Model.EndPage)
                    {
                        <li class="page-item">
                            <a class="page-link" href="javascript:;" aria-label="Next">
                                <span aria-hidden="true">»</span>
                            </a>
                        </li>
                    }

                </ul>
            </nav>
        }

    </div>


   @*  <div class="content-area hidden" id="news-content">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-800">مدیریت اخبار</h2>
            <button id="new-news-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none">
                <i class="fas fa-plus ml-2"></i>
                خبر جدید
            </button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="news-container">
            <!-- News cards will be added dynamically -->
        </div> *@
    </div>


