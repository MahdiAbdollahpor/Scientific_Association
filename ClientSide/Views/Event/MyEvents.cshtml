@using ServiceLayer.ViewModels.UserViewModels
@model List<UserEventViewModel>
@{
    ViewData["Title"] = "همایش‌های من";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mx-auto px-4 mt-5">
    <main class="pb-3">
        <section class="mb-12">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800 border-r-4 border-blue-500 pr-3">همایش‌های من</h2>
                <a asp-action="Index" class="text-blue-600 hover:text-blue-800 flex items-center">
                    مشاهده همه همایش‌ها
                    <i class="fas fa-arrow-left mr-2"></i>
                </a>
            </div>

            @if (Model.Any())
            {
                <div class="bg-white shadow rounded-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عنوان همایش</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">تاریخ برگزاری</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">تاریخ ثبت‌نام</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">وضعیت</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عملیات</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    <img class="h-10 w-10 rounded-full object-cover" src="@(item.ImagePath ?? "/images/no-image.jpg")" alt="@item.Title">
                                                </div>
                                                <div class="mr-4">
                                                    <div class="text-sm font-medium text-gray-900">@item.Title</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">@item.EventDate</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">@item.RegistrationDate</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs rounded-full @(item.RegistrationStatus == "تایید شده" ? "bg-green-100 text-green-800" : "bg-yellow-100 text-yellow-800")">
                                                @item.RegistrationStatus
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a asp-action="Details" asp-route-id="@item.EventId" class="text-blue-600 hover:text-blue-900">جزئیات</a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            }
            else
            {
                <div class="bg-white shadow rounded-lg p-6 text-center">
                    <i class="fas fa-calendar-times text-4xl text-gray-400 mb-4"></i>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">همایشی ثبت‌نام نکرده‌اید</h3>
                    <p class="text-gray-600 mb-4">می‌توانید در همایش‌های آینده ثبت‌نام کنید.</p>
                    <a asp-action="Index" class="btn btn-primary">
                        <i class="fas fa-arrow-left ml-2"></i>
                        مشاهده همایش‌ها
                    </a>
                </div>
            }
        </section>
    </main>
</div>